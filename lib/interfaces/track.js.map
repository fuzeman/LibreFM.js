{"version":3,"sources":["interfaces/track.js"],"names":["TrackInterface","items","params","item","i","Array","isArray","length","Error","track","artist","timestamp","Object","keys","forEach","key","http","post","authenticated","then","body","scrobbles","nowplaying"],"mappings":"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","file":"track.js","sourcesContent":["import Interface from './base';\r\nimport {isDefined} from '../core/helpers';\r\n\r\n\r\nexport default class TrackInterface extends Interface {\r\n    scrobble(items) {\r\n        var params = {};\r\n        var item;\r\n        var i;\r\n\r\n        if(!isDefined(items) || !Array.isArray(items) || items.length < 1) {\r\n            throw new Error('Invalid value provided for the \"items\" parameter');\r\n        }\r\n\r\n        if(items.length > 50) {\r\n            throw new Error('Exceeded scrobble batch limit, only 50 scrobbles can be sent in a single batch');\r\n        }\r\n\r\n        // Build parameters\r\n        for(i = 0; i < items.length; ++i) {\r\n            item = items[i];\r\n\r\n            // Ensure required parameters have been defined\r\n            if(!isDefined(item.track)) {\r\n                throw new Error('Missing required \"track\" parameter in item #' + i);\r\n            }\r\n\r\n            if(!isDefined(item.artist)) {\r\n                throw new Error('Missing required \"artist\" parameter in item #' + i);\r\n            }\r\n\r\n            if(!isDefined(item.timestamp)) {\r\n                throw new Error('Missing required \"timestamp\" parameter in item #' + i);\r\n            }\r\n\r\n            // Add parameters for each item property\r\n            Object.keys(item).forEach((key) => {\r\n                if(!isDefined(item[key])) {\r\n                    return;\r\n                }\r\n\r\n                params[key + '[' + i + ']'] = item[key];\r\n            });\r\n        }\r\n\r\n        // Send request\r\n        return this.http.post('track.scrobble', {\r\n            params: params,\r\n\r\n            authenticated: true\r\n        }).then(function(body) {\r\n            if(isDefined(body) && isDefined(body.scrobbles)) {\r\n                return body.scrobbles;\r\n            }\r\n\r\n            return null;\r\n        });\r\n    }\r\n\r\n    updateNowPlaying(item) {\r\n        if(!isDefined(item)) {\r\n            throw new Error('Invalid value provided for the \"item\" parameter');\r\n        }\r\n\r\n        if(!isDefined(item.track)) {\r\n            throw new Error('Invalid value provided for the \"track\" property in the \"item\" object');\r\n        }\r\n\r\n        if(!isDefined(item.artist)) {\r\n            throw new Error('Invalid value provided for the \"artist\" property in the \"item\" object');\r\n        }\r\n\r\n        // Send request\r\n        return this.http.post('track.updateNowPlaying', {\r\n            params: item,\r\n\r\n            authenticated: true\r\n        }).then(function(body) {\r\n            if(isDefined(body) && isDefined(body.nowplaying)) {\r\n                return body.nowplaying;\r\n            }\r\n\r\n            return null;\r\n        });\r\n    }\r\n\r\n    love(track, artist) {\r\n        if(!isDefined(track)) {\r\n            throw new Error('Invalid value provided for the \"track\" parameter');\r\n        }\r\n\r\n        if(!isDefined(artist)) {\r\n            throw new Error('Invalid value provided for the \"artist\" parameter');\r\n        }\r\n\r\n        throw new Error('Not Implemented');\r\n    }\r\n\r\n    unlove(track, artist) {\r\n        if(!isDefined(track)) {\r\n            throw new Error('Invalid value provided for the \"track\" parameter');\r\n        }\r\n\r\n        if(!isDefined(artist)) {\r\n            throw new Error('Invalid value provided for the \"artist\" parameter');\r\n        }\r\n\r\n        throw new Error('Not Implemented');\r\n    }\r\n}\r\n"]}